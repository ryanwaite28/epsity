<!DOCTYPE html>
<html>

<head>
  <title>Epsity | Profile</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {% load staticfiles %}

  {% include 'dependencies-1.html' %}

  <link rel="stylesheet" type="text/css" href="/static/css/grand.css">
  <link rel="stylesheet" type="text/css" href="/static/css/profile.css">
  <link rel="icon" size="20x20" href="/static/img/logo-2.png"/>
  <script src="/static/js/grand.js"></script>
  <script src="/static/js/profile.js"></script>
  <script src="/static/js/controllers/profile-home-ctrl.js"></script>
  <script src="/static/js/controllers/posts-ctrl.js"></script>
</head>

  <body ng-app="epsityApp" ng-controller="profileHomeCtrl" class="transition">

    {% include 'topbar-1.html' %}

    <!--  -->

    <div id="main-container">
      <div id="mc-inner" style="background: transparent;">
        <div class="container-fluid">

          <div style="min-height: 75vh;" class="row fill transition" data-parallax="scroll" data-image-src="{{ you.background }}">
            <div class="dim-4"></div>
            <div class="col-sm-3 sdw-2 sbm-1 brd-lg">
              <div class="dim-3"></div>
              <div class="padd-1 mk-rel">
                <img id="prof-img" class="middlr img-polaroid img-shadow" title="Profile Image" alt="Profile Image" src="{{ you.avi }}"/>
                <h3 class="text-center text-lightgrey"><strong>{{ you.uname }}</strong></h3>
                <p class="text-center text-lightgrey">{{ you.displayname }}</p>
                <!-- <p class="text-center text-lightgrey"><strong>Rank:</strong> Average</p> -->
                <hr>
                <div class="">
                  <ul id="prof-stats" class="ul-raw">
                    <li id="prof-stats-ctrl" class="switch-div-ctrl"><strong>Stats</strong></li>
                    <li id="prof-bio-ctrl" class="switch-div-ctrl"><strong>Bio</strong></li>
                    <li id="prof-info-ctrl" class="switch-div-ctrl"><strong>Info</strong></li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="col-sm-5"></div>

            <div class="col-sm-4 switch-div" id="prof-stats-div" style="display: block;">
              <div class="dim-3"></div>
              <div class="padd-1 mk-rel">
                <i class="switch-div-x fa fa-times-circle-o" aria-hidden="true"></i>
                <h3 class="text-center text-lightgrey"><strong>Stats</strong></h3>
                <hr>
                <div class="">
                  <ul class="ul-raw text-lightgrey" id="">
                    <li><strong>Following:</strong> {{ following }}</li>
                    <li><strong>Followers:</strong> {{ followers }}</li>
                    <li><strong>Groups:</strong> {{ groups }}</li>
                    <li><strong>Posts:</strong> 0</li>
                    <li><strong>Likes:</strong> 0</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="col-sm-4 switch-div" id="prof-bio-div">
              <div class="dim-3"></div>
              <div class="padd-1 mk-rel">
                <i class="switch-div-x fa fa-times-circle-o" aria-hidden="true"></i>
                <h3 class="text-center text-lightgrey"><strong>Bio <a class="text-lightgrey" title="Go To Settings" href="/mysettings"><i class="fa fa-pencil-square pull-right" aria-hidden="true"></i></a></strong></h3>
                <hr>
                <div class="text-lightgrey">
                  <p class="">{% autoescape off %}{{ you.bio_desc|linebreaks }}{% endautoescape %}</p>
                </div>
              </div>
            </div>

            <div class="col-sm-4 switch-div" id="prof-info-div">
              <div class="dim-3"></div>
              <div class="padd-1 mk-rel">
                <i class="switch-div-x fa fa-times-circle-o" aria-hidden="true"></i>
                <h3 class="text-center text-lightgrey"><strong>Info <a class="text-lightgrey" title="Go To Settings" href="/mysettings"><i class="fa fa-pencil-square pull-right" aria-hidden="true"></i></a></strong></h3>
                <hr>
                <div class="">
                  <p class="text-lightgrey"><strong>Interests</strong></p>
                  <p id="interests" class="text-lightgrey">{{ you.interests }}</p>
                </div>
                <br>
                <div class="">
                  <p class="text-lightgrey"><strong>Seeking</strong></p>
                  <p id="seeking" class="text-lightgrey">{{ you.seeking }}</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Contents -->
          <br>

          <div style="min-height: 100vh;" class="row no-padd">
            <div class="col-md-3" id="prof-sidebar1">
              <div class="padd-1 mk-rel sdw-1 sbm-1 bg-white">
                <h4 class="text-center">Recent</h4>
                <hr>

              </div>
            </div>

            <div class="col-md-3 float-right" id="prof-sidebar2">
              <div class="padd-1 mk-rel sdw-1 sbm-1 bg-white">
                <h4 class="text-center">Suggestions</h4>
                <hr>

              </div>
            </div>

            <div ng-controller="postsCtrl" class="col-md-6" id="prof-mainbar">
              <div class="padd-1 mk-rel sdw-1 bg-white">
                <h4 class="text-center">Create Post</h4>
                <p class="no-marg text-center p-emp-1"><i data-toggle="collapse" data-target="#new-post-div" class="rotator fa fa-chevron-circle-down transition" aria-hidden="true"></i></p>

                <div id="new-post-div" class="mk-rel collapse">
                  <hr>
                  <form class="middlr" id="new-post-form" enctype="multipart/form-data" action="/action/form/" method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="create post"/>

                    <p class="text-center">Choose A Post Type</p>
                    <select class="middlr" id="newpost-type" name="post_type" required>
                      <option value="Text">Text</option>
                      <option value="Audio">Audio</option>
                      <option value="Photo">Photo</option>
                      <option value="Video">Video</option>
                    </select>
                    <br>

                    <input class="middlr input-t-s1" type="text" name="title" placeholder="Title..."/><br>
                    <textarea style="min-height: 100px;" class="middlr input-t-s1" type="middlr" name="contents" placeholder="Contents..."></textarea><br>
                    <input class="middlr input-t-s1" type="text" name="link"  placeholder="Add a Link If You Want..."/><br>
                    <input class="middlr btn btn-default transition" type="file" name="media"/><br>
                    <input type="hidden" name="owner_type" value="Account"/>
                    <input type="hidden" name="origin" value=""/>
                    <input class="btn btn-success transition middlr" type="button" value="Create Post" ng-click="createUserPost()"/>
                  </form>
                </div>

              </div>

              {% for p in posts %}
              <div class="padd-1 mk-rel sdw-1 bg-white">
                <div class="row">
                  <div class="col-sm-3">
                    <img width="100px"  class="middlr brd-bl" src="{{ p.owner.avi }}"/><br>
                    <p class="text-center">{{ p.owner.uname }}</p>
                  </div>
                  <div class="col-sm-9">
                    <h3><strong>{{ p.title }}</strong></h3>
                    <p>{{ p.contents }}</p>
                    <br>

                      {% if p.attachment_type == 'Audio' %}
                      <div class="polaroid-3 brd-bl">
                        <audio class="smb-1 max-w" controls>
                          <source src="{{ p.attachment }}" type="">
                        </audio>
                      </div>
                      {% elif p.attachment_type == 'Video' %}
                      <div class="polaroid-3 brd-bl">
                        <video class="smb-1 max-w" width="320" height="240" controls>
                          <source src="{{ p.attachment }}" type="">
                        </video>
                      </div>
                      {% elif p.attachment_type == 'Photo' %}
                      <div class="polaroid-3 brd-bl">
                        <img class="smb-1 max-w" src="{{ p.attachment }}"/>
                      </div>
                      {% endif %}

                    <p>&nbsp;</p>
                    <p class="text-grey"><em>{{ p.date_created }}</em></p>
                    <p class="">
                      <span class="transition btn-s1 like-btn-o btn-action" data-like-status="{{ p.like_status }}" data-post-id="{{ p.p_id }}" data-post-type="{{ p.post_type }}" data-owner-id="{{ p.ownerid }}" data-owner-type="{{ p.owner_type }}" data-post-status="{{ p.status }}">
                        <i class="fa fa-heart" aria-hidden="true"></i> Like
                      </span>
                      <span class="transition btn-s1 comment-btn-1 btn-action" data-post-id="{{ p.p_id }}" data-post-type="{{ p.post_type }}" data-owner-id="{{ p.ownerid }}" data-owner-type="{{ p.owner_type }}" data-status="{{ p.status }}">
                        <i class="fa fa-comments" aria-hidden="true"></i> Comment
                      </span>
                    </p>
                  </div>
                  <div class="col-sm-12">

                  </div>
                </div>
              </div>
              {% endfor %}

            </div>


          </div>

          <br>

        </div>
      </div>
    </div>

    {% autoescape off %}
    <script>
      (function(){
        window.interests = '{{ info.interests }}'.split(';').join('; ');
        window.seeking = '{{ info.seeking }}'.split(';').join('; ');

        $('#interests').text( interests );
        $('#seeking').text( seeking );
      })()
    </script>
    {% endautoescape %}


  </body>

  <!--

    wp = Welcome Page

  -->

</html>
